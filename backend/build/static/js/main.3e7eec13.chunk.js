(this["webpackJsonpdate-selector"]=this["webpackJsonpdate-selector"]||[]).push([[0],{128:function(e,n,t){"use strict";t.r(n);var a,c,s,r,o,i,l,d,j=t(47),u=t(0),b=t(50),m=t.n(b),h=t(17),O=t(39),x=t.n(O),v=t(45),p=t(46),f=t(28),g=t(12),N=t(30),w=Object(g.gql)(a||(a=Object(N.a)(["\nmutation login($username: String!, $password: String!){\n  login(username: $username, password: $password){value}\n}"]))),y=Object(g.gql)(c||(c=Object(N.a)(["\nmutation addEvent($name: String! $group: String! $dates: [String!]!){\n  addEvent(name: $name, group: $group dates: $dates){name id}\n}"]))),S=Object(g.gql)(s||(s=Object(N.a)(["\nmutation createUser($name: String! $username: String! $password: String!){\n  createUser(name: $name, username: $username, password: $password){name}\n}"]))),E=t(15),k=function(e){var n=Object(g.useApolloClient)(),t=Object(E.g)(),a=Object(g.useMutation)(w,{onError:function(e){console.log(e)}}),c=Object(h.a)(a,1)[0];return{login:function(){var n=Object(v.a)(x.a.mark((function n(a){var s,r,o;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=a.username,r=a.password,console.log(s,r),n.next=4,c({variables:{username:s,password:r}});case 4:o=n.sent,e(o.data.login.value),localStorage.setItem("user-token",o.data.login.value),t.push("/");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),logout:function(){e(null),localStorage.clear(),n.resetStore()}}},C=t(3),D=function(e){var n=e.setToken,t=k(n).login;return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Login"}),Object(C.jsx)(p.a,{initialValues:{username:"",password:""},onSubmit:function(){var e=Object(v.a)(x.a.mark((function e(n,a){var c,s,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.username,s=n.password,r=a.resetForm,e.next=4,t({username:c,password:s});case 4:r({values:{username:"",password:""}});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(C.jsxs)("form",{onSubmit:c,children:["username: ",Object(C.jsx)("input",{id:"username",type:"text",name:"username",onChange:t,onBlur:a,value:n.username}),Object(C.jsx)("br",{}),"password: ",Object(C.jsx)("input",{id:"password",type:"password",name:"password",onChange:t,onBlur:a,value:n.password}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{type:"submit",id:"login-button",children:"Login"})]})}}),Object(C.jsx)("h2",{children:"Not yet signed in?"}),Object(C.jsx)("button",{id:"signIn-button",children:Object(C.jsx)(f.b,{to:"SignIn",children:"Sign In"})})]})},M=function(e){var n=e.setToken,t=k(n).login,a=function(){var e=Object(v.a)(x.a.mark((function e(n,a){var c,r,o,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.username,r=n.name,o=n.password,i=a.resetForm,e.next=4,s({variables:{username:c,name:r,password:o}});case 4:return e.next=6,t({username:c,password:o});case 6:i({values:{username:"",password:"",name:""}});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),c=Object(g.useMutation)(S,{onError:function(e){console.log(e.graphQLErrors[0].message)}}),s=Object(h.a)(c,1)[0];return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Sign In"}),Object(C.jsx)(p.a,{initialValues:{username:"",password:"",name:""},onSubmit:a,children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(C.jsxs)("form",{onSubmit:c,children:["username: ",Object(C.jsx)("input",{id:"username",type:"text",name:"username",onChange:t,onBlur:a,value:n.username}),Object(C.jsx)("br",{}),"name: ",Object(C.jsx)("input",{id:"name",type:"text",name:"name",onChange:t,onBlur:a,value:n.name}),Object(C.jsx)("br",{}),"password: ",Object(C.jsx)("input",{id:"password",type:"password",name:"password",onChange:t,onBlur:a,value:n.password}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{type:"submit",id:"submit-button",children:"Sign In"})]})}})]})},$=Object(g.gql)(r||(r=Object(N.a)(["\nquery{\n  me{\n    name\n    events{\n      name\n      id\n    }\n  }\n}"]))),q=(Object(g.gql)(o||(o=Object(N.a)(["\nquery{\n  allEvents{\n    name\n  }\n}"]))),Object(g.gql)(i||(i=Object(N.a)(["\nquery{\n  userGroups{name}\n}"])))),Y=(Object(g.gql)(l||(l=Object(N.a)(["\nquery{\n  userEvents{\n    name\n    id\n  }\n}"]))),Object(g.gql)(d||(d=Object(N.a)(["\nquery event($id: ID!){\n  event(id: $id){\n    name\n    id\n    dates\n  }\n}"])))),I=t(98),B=t(96),A=t(129),Q=t(136),_=t(130),L=t(131),T=t(132),F=t(133),H=t(134),V=t(135),G=(t(70),function(e){var n=e.month,t=e.setMonth;return Object(C.jsxs)("div",{className:"header row flex-middle",children:[Object(C.jsx)("div",{className:"col col-start",children:Object(C.jsx)("div",{className:"icon",onClick:function(){t(A.a(n,1))},children:"chevron_left"})}),Object(C.jsx)("div",{className:"col col-center",children:Object(C.jsx)("span",{children:Q.a(n,"MMMM YYYYY")})}),Object(C.jsx)("div",{className:"col col-end",onClick:function(){t(B.a(n,1))},children:Object(C.jsx)("div",{className:"icon",children:"chevron_right"})})]})}),J=function(e){var n=e.month,t=_.a(n),a=Array.from(Array(7)).map((function(e,n){return Object(C.jsx)("div",{className:"col col-center",children:Q.a(L.a(t,n),"EEEEEE")},n)}));return Object(C.jsx)("div",{className:"days row",children:a})},P=function(e){for(var n=e.month,t=e.setDates,a=e.dates,c=T.a(n),s=F.a(c),r=_.a(c),o=H.a(s),i=[],l=[],d=r,j="";d<=o;){for(var u=0;u<7;u++){j=Q.a(d,"d");var b=d;l.push(Object(C.jsx)(U,{formattedDate:j,day:b,monthStart:c,setDates:t,dates:a},b)),d=L.a(d,1)}i.push(Object(C.jsx)("div",{className:"row",children:l},d)),l=[]}return Object(C.jsx)("div",{className:"body",children:i})},U=function(e){var n=e.formattedDate,t=e.day,a=e.monthStart,c=e.setDates,s=e.dates,r=Object(u.useState)(!1),o=Object(h.a)(r,2),i=o[0],l=o[1],d=function(e){l(!i),c(s.concat(Q.a(e,"DDD")))};return i?Object(C.jsxs)("div",{className:"col cell clicked",onClick:function(){return d(t)},children:[Object(C.jsx)("span",{className:"number",children:n}),Object(C.jsx)("span",{className:"bg",children:n})]},t):Object(C.jsxs)("div",{className:"col cell ".concat(V.a(t,a)?"":"disabled"),onClick:function(){return d(t)},children:[Object(C.jsx)("span",{className:"number",children:n}),Object(C.jsx)("span",{className:"bg",children:n})]},t)},z=function(e){var n=e.setDates,t=e.dates,a=Object(u.useState)(new Date),c=Object(h.a)(a,2),s=c[0],r=c[1];return Object(C.jsxs)("div",{className:"calendar",children:[Object(C.jsx)(G,{month:s,setMonth:r}),Object(C.jsx)(J,{month:s}),Object(C.jsx)(P,{month:s,setDates:n,dates:t})]})},K=function(){var e=Object(u.useState)([]),n=Object(h.a)(e,2),t=n[0],a=n[1],c=Object(u.useState)(null),s=Object(h.a)(c,2),r=s[0],o=s[1],i=Object(g.useQuery)(q),l=[];i.data&&(l=i.data.userGroups.map((function(e){return{value:e.name,label:e.name}})));var d=Object(g.useMutation)(y,{update:function(e,n){console.log("dataInStore:");var t=e.readQuery({query:$}),a=t.me.events;console.log(t.me),console.log(a),console.log(n),e.writeQuery({query:$,data:{me:Object(j.a)(Object(j.a)({},t.me),{},{events:a.concat(n.data.addEvent)})}})}}),b=Object(h.a)(d,1)[0];return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"New Event"}),Object(C.jsx)(p.a,{initialValues:{name:""},onSubmit:function(e,n){var a=e.name,c=n.resetForm;b({variables:{name:a,group:r,dates:t}}),c({})},children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(C.jsxs)("form",{onSubmit:c,children:["event name: ",Object(C.jsx)("input",{id:"name",type:"text",name:"name",onChange:t,onBlur:a,value:n.name}),Object(C.jsx)("button",{id:"submit-button",type:"submit",children:"Submit"})]})}}),Object(C.jsx)(I.a,{id:"group-options",options:l,onChange:function(e){o(e.value)}}),Object(C.jsx)("h2",{children:"Choose possible days"}),Object(C.jsx)(z,{dates:t,setDates:a}),Object(C.jsxs)("button",{id:"homepage-button",children:[" ",Object(C.jsx)(f.b,{to:"/",children:"Home Page"})]})]})},R=function(e){var n=e.month,t=e.setMonth;return Object(C.jsxs)("div",{className:"header row flex-middle",children:[Object(C.jsx)("div",{className:"col col-start",children:Object(C.jsx)("div",{className:"icon",onClick:function(){t(A.a(n,1))},children:"chevron_left"})}),Object(C.jsx)("div",{className:"col col-center",children:Object(C.jsx)("span",{children:Q.a(n,"MMMM YYYYY")})}),Object(C.jsx)("div",{className:"col col-end",onClick:function(){t(B.a(n,1))},children:Object(C.jsx)("div",{className:"icon",children:"chevron_right"})})]})},W=function(e){var n=e.month,t=_.a(n),a=Array.from(Array(7)).map((function(e,n){return Object(C.jsx)("div",{className:"col col-center",children:Q.a(L.a(t,n),"EEEEEE")},n)}));return Object(C.jsx)("div",{className:"days row",children:a})},X=function(e){for(var n=e.month,t=e.dates,a=T.a(n),c=F.a(a),s=_.a(a),r=H.a(c),o=[],i=[],l=s,d="";l<=r;){for(var j=0;j<7;j++){d=Q.a(l,"d");var u=l;i.push(Object(C.jsx)(Z,{formattedDate:d,day:u,monthStart:a,dates:t},u)),l=L.a(l,1)}o.push(Object(C.jsx)("div",{className:"row",children:i},l)),i=[]}return Object(C.jsx)("div",{className:"body",children:o})},Z=function(e){var n=e.formattedDate,t=e.day,a=e.monthStart;return e.dates.includes(Q.a(t,"DDD"))?Object(C.jsxs)("div",{className:"col cell clicked",children:[Object(C.jsx)("span",{className:"number",children:n}),Object(C.jsx)("span",{className:"bg",children:n})]},t):Object(C.jsxs)("div",{className:"col cell ".concat(V.a(t,a)?"":"disabled"),children:[Object(C.jsx)("span",{className:"number",children:n}),Object(C.jsx)("span",{className:"bg",children:n})]},t)},ee=function(e){var n=e.dates,t=Object(u.useState)(new Date),a=Object(h.a)(t,2),c=a[0],s=a[1];return Object(C.jsxs)("div",{className:"calendar",children:[Object(C.jsx)(R,{month:c,setMonth:s}),Object(C.jsx)(W,{month:c}),Object(C.jsx)(X,{month:c,dates:n}),Object(C.jsx)("ul",{children:n})]})},ne=function(){var e=Object(E.h)().id,n=Object(g.useQuery)(Y,{variables:{id:e}});return n.data?Object(C.jsxs)("div",{children:[n.data.event.name,Object(C.jsx)(ee,{dates:n.data.event.dates})]}):Object(C.jsx)("div",{children:"...loading"})},te=function(e){var n=e.month,t=e.setMonth;return Object(C.jsxs)("div",{className:"header row flex-middle",children:[Object(C.jsx)("div",{className:"col col-start",children:Object(C.jsx)("div",{className:"icon",onClick:function(){t(A.a(n,1))},children:"chevron_left"})}),Object(C.jsx)("div",{className:"col col-center",children:Object(C.jsx)("span",{children:Q.a(n,"MMMM YYYYY")})}),Object(C.jsx)("div",{className:"col col-end",onClick:function(){t(B.a(n,1))},children:Object(C.jsx)("div",{className:"icon",children:"chevron_right"})})]})},ae=function(e){var n=e.month,t=_.a(n),a=Array.from(Array(7)).map((function(e,n){return Object(C.jsx)("div",{className:"col col-center",children:Q.a(L.a(t,n),"EEEEEE")},n)}));return Object(C.jsx)("div",{className:"days row",children:a})},ce=function(e){for(var n=e.month,t=T.a(n),a=F.a(t),c=_.a(t),s=H.a(a),r=[],o=[],i=c,l="";i<=s;){for(var d=0;d<7;d++){l=Q.a(i,"d");var j=i;o.push(Object(C.jsx)(se,{formattedDate:l,day:j,monthStart:t},j)),i=L.a(i,1)}r.push(Object(C.jsx)("div",{className:"row",children:o},i)),o=[]}return Object(C.jsx)("div",{className:"body",children:r})},se=function(e){var n=e.formattedDate,t=e.day,a=e.monthStart,c=Object(u.useState)(!1),s=Object(h.a)(c,2),r=s[0],o=s[1],i=function(){o(!r)};return r?Object(C.jsxs)("div",{className:"col cell clicked",onClick:function(){return i()},children:[Object(C.jsx)("span",{className:"number",children:n}),Object(C.jsx)("span",{className:"bg",children:n})]},t):Object(C.jsxs)("div",{className:"col cell ".concat(V.a(t,a)?"":"disabled"),onClick:function(){return i()},children:[Object(C.jsx)("span",{className:"number",children:n}),Object(C.jsx)("span",{className:"bg",children:n})]},t)},re=function(){var e=Object(u.useState)(new Date),n=Object(h.a)(e,2),t=n[0],a=n[1];return Object(C.jsxs)("div",{className:"calendar",children:[Object(C.jsx)(te,{month:t,setMonth:a}),Object(C.jsx)(ae,{month:t}),Object(C.jsx)(ce,{month:t})]})},oe=function(e){var n=e.events.map((function(e){return Object(C.jsx)("li",{children:Object(C.jsx)(f.b,{to:"/events/".concat(e.id),children:e.name})},e.id)}));return Object(C.jsx)("div",{children:Object(C.jsx)("ul",{children:n})})},ie=t(99),le=function(e){var n=e.logout,t=Object(g.useQuery)($);return console.log(t),Object(C.jsxs)("div",{children:[t.data?Object(C.jsxs)("h2",{children:["Hello ",t.data.me.name," "]}):null,Object(C.jsx)(re,{}),t.data?Object(C.jsx)(oe,{events:t.data.me.events}):null,Object(C.jsx)(ie.a,{id:"addEvent-button",children:Object(C.jsx)(f.b,{to:"/addevent",children:"add event"})}),Object(C.jsx)("button",{id:"logout-button",onClick:n,children:"Log Out"})]})},de=function(){var e=Object(u.useState)(localStorage.getItem("user-token")),n=Object(h.a)(e,2),t=n[0],a=n[1],c=k(a).logout;return Object(C.jsx)(f.a,{children:Object(C.jsxs)(E.d,{children:[Object(C.jsx)(E.b,{path:"/SignIn",children:Object(C.jsx)(M,{setToken:a})}),Object(C.jsx)(E.b,{path:"/login",children:Object(C.jsx)(D,{setToken:a})}),Object(C.jsx)(E.b,{path:"/events/:id",children:Object(C.jsx)(ne,{})}),Object(C.jsx)(E.b,{path:"/addevent",children:Object(C.jsx)(K,{})}),Object(C.jsx)(E.b,{path:"/",children:t?Object(C.jsx)(le,{logout:c}):Object(C.jsx)(E.a,{to:"/login"})})]})})},je=t(100),ue=Object(je.a)((function(e,n){var t=n.headers,a=localStorage.getItem("user-token");return{headers:Object(j.a)(Object(j.a)({},t),{},{authorization:a?"bearer ".concat(a):null})}})),be=new g.HttpLink({uri:"/graphql"}),me=new g.ApolloClient({cache:new g.InMemoryCache,link:ue.concat(be)});m.a.render(Object(C.jsx)(g.ApolloProvider,{client:me,children:Object(C.jsx)(de,{})}),document.getElementById("root"))},70:function(e,n,t){}},[[128,1,2]]]);
//# sourceMappingURL=main.3e7eec13.chunk.js.map