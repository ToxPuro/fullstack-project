(this["webpackJsonpdate-selector"]=this["webpackJsonpdate-selector"]||[]).push([[0],{128:function(e,n,t){"use strict";t.r(n);var a,c,r,s,o,i,j,l,u,d,b,O,h,m=t(47),x=t(0),v=t(50),p=t.n(v),g=t(15),f=t(31),y=t.n(f),w=t(42),N=t(44),S=t(14),C=t(7),k=t(19),E=Object(C.gql)(a||(a=Object(k.a)(["\nmutation login($username: String!, $password: String!){\n  login(username: $username, password: $password){value}\n}"]))),$=Object(C.gql)(c||(c=Object(k.a)(["\nmutation addEvent($name: String! $group: String! $dates: [String!]!){\n  addEvent(name: $name, group: $group dates: $dates){name id}\n}"]))),D=Object(C.gql)(r||(r=Object(k.a)(["\nmutation createUser($name: String! $username: String! $password: String!){\n  createUser(name: $name, username: $username, password: $password){name}\n}"]))),q=Object(C.gql)(s||(s=Object(k.a)(["\nmutation addGroup($name: String! $users: [String]!){\n  createGroup(name: $name, users: $users){name}\n}"]))),M=Object(C.gql)(o||(o=Object(k.a)(["\nmutation joinGroup($id: ID!){\n  joinGroup(id: $id){name}\n}"]))),I=t(17),G=function(e){var n=Object(C.useApolloClient)(),t=Object(I.g)(),a=Object(C.useMutation)(E,{onError:function(e){console.log(e)}}),c=Object(g.a)(a,1)[0];return{login:function(){var n=Object(w.a)(y.a.mark((function n(a){var r,s,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.username,s=a.password,console.log(r,s),n.next=4,c({variables:{username:r,password:s}});case 4:o=n.sent,e(o.data.login.value),localStorage.setItem("user-token",o.data.login.value),t.push("/");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),logout:function(){e(null),localStorage.clear(),n.resetStore()}}},Y=t(1),B=function(e){var n=e.setToken,t=G(n).login;return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{children:"Login"}),Object(Y.jsx)(N.a,{initialValues:{username:"",password:""},onSubmit:function(){var e=Object(w.a)(y.a.mark((function e(n,a){var c,r,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.username,r=n.password,s=a.resetForm,e.next=4,t({username:c,password:r});case 4:s({values:{username:"",password:""}});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(Y.jsxs)("form",{onSubmit:c,children:["username: ",Object(Y.jsx)("input",{id:"username",type:"text",name:"username",onChange:t,onBlur:a,value:n.username}),Object(Y.jsx)("br",{}),"password: ",Object(Y.jsx)("input",{id:"password",type:"password",name:"password",onChange:t,onBlur:a,value:n.password}),Object(Y.jsx)("br",{}),Object(Y.jsx)("button",{type:"submit",id:"login-button",children:"Login"})]})}}),Object(Y.jsx)("h2",{children:"Not yet signed in?"}),Object(Y.jsx)("button",{id:"signIn-button",children:Object(Y.jsx)(S.b,{to:"SignIn",children:"Sign In"})})]})},Q=function(e){var n=e.setToken,t=G(n).login,a=function(){var e=Object(w.a)(y.a.mark((function e(n,a){var c,s,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.username,s=n.name,o=n.password,i=a.resetForm,e.next=4,r({variables:{username:c,name:s,password:o}});case 4:return e.next=6,t({username:c,password:o});case 6:i({values:{username:"",password:"",name:""}});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),c=Object(C.useMutation)(D,{onError:function(e){console.log(e.graphQLErrors[0].message)}}),r=Object(g.a)(c,1)[0];return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{children:"Sign In"}),Object(Y.jsx)(N.a,{initialValues:{username:"",password:"",name:""},onSubmit:a,children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(Y.jsxs)("form",{onSubmit:c,children:["username: ",Object(Y.jsx)("input",{id:"username",type:"text",name:"username",onChange:t,onBlur:a,value:n.username}),Object(Y.jsx)("br",{}),"name: ",Object(Y.jsx)("input",{id:"name",type:"text",name:"name",onChange:t,onBlur:a,value:n.name}),Object(Y.jsx)("br",{}),"password: ",Object(Y.jsx)("input",{id:"password",type:"password",name:"password",onChange:t,onBlur:a,value:n.password}),Object(Y.jsx)("br",{}),Object(Y.jsx)("button",{type:"submit",id:"submit-button",children:"Sign In"})]})}})]})},A=Object(C.gql)(i||(i=Object(k.a)(["\nquery{\n  me{\n    name\n    events{\n      name\n      id\n    }\n  }\n}"]))),H=(Object(C.gql)(j||(j=Object(k.a)(["\nquery{\n  allEvents{\n    name\n  }\n}"]))),Object(C.gql)(l||(l=Object(k.a)(["\nquery{\n  userGroups{name id}\n}"])))),_=(Object(C.gql)(u||(u=Object(k.a)(["\nquery{\n  userEvents{\n    name\n    id\n  }\n}"]))),Object(C.gql)(d||(d=Object(k.a)(["\nquery event($id: ID!){\n  event(id: $id){\n    name\n    id\n    dates{\n      date\n    }\n  }\n}"])))),F=Object(C.gql)(b||(b=Object(k.a)(["\nquery group($id: ID!){\n  group(id: $id){\n    name\n    id\n    users{\n      name\n      id\n    }\n  }\n}"]))),L=Object(C.gql)(O||(O=Object(k.a)(["\nquery user($id: ID!){\n  user(id: $id){\n    name\n    id\n  }\n}"]))),V=Object(C.gql)(h||(h=Object(k.a)(["\nquery{\n  allGroups{\n    name\n    id\n  }\n}"]))),J=t(98),T=t(96),P=t(129),U=t(136),z=t(130),W=t(131),K=t(132),R=t(133),X=t(134),Z=t(135),ee=(t(70),function(e){var n=e.month,t=e.setMonth;return Object(Y.jsxs)("div",{className:"header row flex-middle",children:[Object(Y.jsx)("div",{className:"col col-start",children:Object(Y.jsx)("div",{className:"icon",onClick:function(){t(P.a(n,1))},children:"chevron_left"})}),Object(Y.jsx)("div",{className:"col col-center",children:Object(Y.jsx)("span",{children:U.a(n,"MMMM YYYYY")})}),Object(Y.jsx)("div",{className:"col col-end",onClick:function(){t(T.a(n,1))},children:Object(Y.jsx)("div",{className:"icon",children:"chevron_right"})})]})}),ne=function(e){var n=e.month,t=z.a(n),a=Array.from(Array(7)).map((function(e,n){return Object(Y.jsx)("div",{className:"col col-center",children:U.a(W.a(t,n),"EEEEEE")},n)}));return Object(Y.jsx)("div",{className:"days row",children:a})},te=function(e){for(var n=e.month,t=e.setDates,a=e.dates,c=K.a(n),r=R.a(c),s=z.a(c),o=X.a(r),i=[],j=[],l=s,u="";l<=o;){for(var d=0;d<7;d++){u=U.a(l,"d");var b=l;j.push(Object(Y.jsx)(ae,{formattedDate:u,day:b,monthStart:c,setDates:t,dates:a},b)),l=W.a(l,1)}i.push(Object(Y.jsx)("div",{className:"row",children:j},l)),j=[]}return Object(Y.jsx)("div",{className:"body",children:i})},ae=function(e){var n=e.formattedDate,t=e.day,a=e.monthStart,c=e.setDates,r=e.dates,s=Object(x.useState)(!1),o=Object(g.a)(s,2),i=o[0],j=o[1],l=function(e){j(!i),c(r.concat(U.a(e,"DDD")))};return i?Object(Y.jsxs)("div",{className:"col cell green",onClick:function(){return l(t)},children:[Object(Y.jsx)("span",{className:"number",children:n}),Object(Y.jsx)("span",{className:"bg",children:n})]},t):Object(Y.jsxs)("div",{className:"col cell ".concat(Z.a(t,a)?"":"disabled"),onClick:function(){return l(t)},children:[Object(Y.jsx)("span",{className:"number",children:n}),Object(Y.jsx)("span",{className:"bg",children:n})]},t)},ce=function(e){var n=e.setDates,t=e.dates,a=Object(x.useState)(new Date),c=Object(g.a)(a,2),r=c[0],s=c[1];return Object(Y.jsxs)("div",{className:"calendar",children:[Object(Y.jsx)(ee,{month:r,setMonth:s}),Object(Y.jsx)(ne,{month:r}),Object(Y.jsx)(te,{month:r,setDates:n,dates:t})]})},re=function(){var e=Object(x.useState)([]),n=Object(g.a)(e,2),t=n[0],a=n[1],c=Object(x.useState)(null),r=Object(g.a)(c,2),s=r[0],o=r[1],i=Object(C.useQuery)(H),j=[];i.data&&(j=i.data.userGroups.map((function(e){return{value:e.name,label:e.name}})));var l=Object(C.useMutation)($,{update:function(e,n){console.log("dataInStore:");var t=e.readQuery({query:A}),a=t.me.events;console.log(t.me),console.log(a),console.log(n),e.writeQuery({query:A,data:{me:Object(m.a)(Object(m.a)({},t.me),{},{events:a.concat(n.data.addEvent)})}})}}),u=Object(g.a)(l,1)[0];return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{children:"New Event"}),Object(Y.jsx)(N.a,{initialValues:{name:""},onSubmit:function(e,n){var a=e.name,c=n.resetForm;u({variables:{name:a,group:s,dates:t}}),c({})},children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(Y.jsxs)("form",{onSubmit:c,children:["event name: ",Object(Y.jsx)("input",{id:"name",type:"text",name:"name",onChange:t,onBlur:a,value:n.name}),Object(Y.jsx)("button",{id:"submit-button",type:"submit",children:"Submit"})]})}}),Object(Y.jsx)(J.a,{id:"group-options",options:j,onChange:function(e){o(e.value)}}),Object(Y.jsx)("h2",{children:"Choose possible days"}),Object(Y.jsx)(ce,{dates:t,setDates:a}),Object(Y.jsxs)("button",{id:"homepage-button",children:[" ",Object(Y.jsx)(S.b,{to:"/",children:"Home Page"})]})]})},se=function(){var e=Object(C.useMutation)(q),n=Object(g.a)(e,1)[0],t=Object(x.useState)([]),a=Object(g.a)(t,2),c=a[0],r=a[1];return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{children:"New Group"}),Object(Y.jsx)(N.a,{initialValues:{name:"",user:""},onSubmit:function(){var e=Object(w.a)(y.a.mark((function e(t,a){var r,s,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,s=a.resetForm,console.log(r),console.log(c),e.next=6,n({variables:{name:r,users:c}});case 6:o=e.sent,console.log(o.data),s({});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:function(e){var n=e.values,t=e.handleChange,a=e.handleBlur,s=e.handleSubmit,o=e.setFieldValue;return Object(Y.jsxs)("form",{onSubmit:s,children:["group name: ",Object(Y.jsx)("input",{id:"name",type:"text",name:"name",onChange:t,onBlur:a,value:n.name}),Object(Y.jsx)("br",{}),"users: ",Object(Y.jsx)("input",{id:"user",type:"text",name:"user",onChange:t,onBlur:a,value:n.user}),Object(Y.jsx)("button",{type:"button",id:"add-user-button",onClick:function(){r(c.concat(n.user)),o("user","")},children:"add user"}),Object(Y.jsx)("br",{}),c.join(" "),Object(Y.jsx)("br",{}),Object(Y.jsx)("button",{id:"submit-button",type:"submit",children:"Submit"})]})}}),Object(Y.jsxs)("button",{id:"homepage-button",children:[" ",Object(Y.jsx)(S.b,{to:"/",children:"Home Page"})]})]})},oe=function(e){var n=e.month,t=e.setMonth;return Object(Y.jsxs)("div",{className:"header row flex-middle",children:[Object(Y.jsx)("div",{className:"col col-start",children:Object(Y.jsx)("div",{className:"icon",onClick:function(){t(P.a(n,1))},children:"chevron_left"})}),Object(Y.jsx)("div",{className:"col col-center",children:Object(Y.jsx)("span",{children:U.a(n,"MMMM YYYYY")})}),Object(Y.jsx)("div",{className:"col col-end",onClick:function(){t(T.a(n,1))},children:Object(Y.jsx)("div",{className:"icon",children:"chevron_right"})})]})},ie=function(e){var n=e.month,t=z.a(n),a=Array.from(Array(7)).map((function(e,n){return Object(Y.jsx)("div",{className:"col col-center",children:U.a(W.a(t,n),"EEEEEE")},n)}));return Object(Y.jsx)("div",{className:"days row",children:a})},je=function(e){for(var n=e.month,t=e.dates,a=K.a(n),c=R.a(a),r=z.a(a),s=X.a(c),o=[],i=[],j=r,l="";j<=s;){for(var u=0;u<7;u++){l=U.a(j,"d");var d=j;i.push(Object(Y.jsx)(ue,{formattedDate:l,day:d,monthStart:a,dates:t},d)),j=W.a(j,1)}o.push(Object(Y.jsx)("div",{className:"row",children:i},j)),i=[]}return Object(Y.jsx)("div",{className:"body",children:o})},le=function(e){var n=e.day,t=e.formattedDate,a=Object(x.useState)("blue"),c=Object(g.a)(a,2),r=c[0],s=c[1];return Object(Y.jsxs)("div",{onClick:function(){return function(e){s("blue"===e?"green":"green"===e?"red":"blue")}(r)},className:"col cell ".concat(r),children:[Object(Y.jsx)("span",{className:"number",children:t}),Object(Y.jsx)("span",{className:"bg",children:t})]},n)},ue=function(e){var n=e.formattedDate,t=e.day,a=e.monthStart;return e.dates.includes(U.a(t,"DDD"))?Object(Y.jsx)(le,{}):Object(Y.jsxs)("div",{className:"col cell ".concat(Z.a(t,a)?"":"disabled"),children:[Object(Y.jsx)("span",{className:"number",children:n}),Object(Y.jsx)("span",{className:"bg",children:n})]},t)},de=function(e){var n=e.dates,t=Object(x.useState)(new Date),a=Object(g.a)(t,2),c=a[0],r=a[1];return Object(Y.jsxs)("div",{className:"calendar",children:[Object(Y.jsx)(oe,{month:c,setMonth:r}),Object(Y.jsx)(ie,{month:c}),Object(Y.jsx)(je,{month:c,dates:n}),Object(Y.jsx)("ul",{children:n})]})},be=function(){var e=Object(I.h)().id,n=Object(C.useQuery)(_,{variables:{id:e}});return console.log(n),n.data?Object(Y.jsxs)("div",{children:[n.data.event.name,Object(Y.jsx)(de,{dates:n.data.event.dates.map((function(e){return e.date}))})]}):Object(Y.jsx)("div",{children:"...loading"})},Oe=function(e){var n=e.month,t=e.setMonth;return Object(Y.jsxs)("div",{className:"header row flex-middle",children:[Object(Y.jsx)("div",{className:"col col-start",children:Object(Y.jsx)("div",{className:"icon",onClick:function(){t(P.a(n,1))},children:"chevron_left"})}),Object(Y.jsx)("div",{className:"col col-center",children:Object(Y.jsx)("span",{children:U.a(n,"MMMM YYYYY")})}),Object(Y.jsx)("div",{className:"col col-end",onClick:function(){t(T.a(n,1))},children:Object(Y.jsx)("div",{className:"icon",children:"chevron_right"})})]})},he=function(e){var n=e.month,t=z.a(n),a=Array.from(Array(7)).map((function(e,n){return Object(Y.jsx)("div",{className:"col col-center",children:U.a(W.a(t,n),"EEEEEE")},n)}));return Object(Y.jsx)("div",{className:"days row",children:a})},me=function(e){for(var n=e.month,t=K.a(n),a=R.a(t),c=z.a(t),r=X.a(a),s=[],o=[],i=c,j="";i<=r;){for(var l=0;l<7;l++){j=U.a(i,"d");var u=i;o.push(Object(Y.jsx)(xe,{formattedDate:j,day:u,monthStart:t},u)),i=W.a(i,1)}s.push(Object(Y.jsx)("div",{className:"row",children:o},i)),o=[]}return Object(Y.jsx)("div",{className:"body",children:s})},xe=function(e){var n=e.formattedDate,t=e.day,a=e.monthStart,c=Object(x.useState)(!1),r=Object(g.a)(c,2),s=r[0],o=r[1],i=function(){o(!s)};return s?Object(Y.jsxs)("div",{className:"col cell green",onClick:function(){return i()},children:[Object(Y.jsx)("span",{className:"number",children:n}),Object(Y.jsx)("span",{className:"bg",children:n})]},t):Object(Y.jsxs)("div",{className:"col cell ".concat(Z.a(t,a)?"":"disabled"),onClick:function(){return i()},children:[Object(Y.jsx)("span",{className:"number",children:n}),Object(Y.jsx)("span",{className:"bg",children:n})]},t)},ve=function(){var e=Object(x.useState)(new Date),n=Object(g.a)(e,2),t=n[0],a=n[1];return Object(Y.jsxs)("div",{className:"calendar",children:[Object(Y.jsx)(Oe,{month:t,setMonth:a}),Object(Y.jsx)(he,{month:t}),Object(Y.jsx)(me,{month:t})]})},pe=function(e){var n=e.events.map((function(e){return Object(Y.jsx)("li",{children:Object(Y.jsx)(S.b,{to:"/events/".concat(e.id),children:e.name})},e.id)}));return Object(Y.jsx)("div",{children:Object(Y.jsx)("ul",{children:n})})},ge=t(99),fe=function(e){var n=e.logout,t=Object(C.useQuery)(A);return console.log(t),Object(Y.jsxs)("div",{children:[t.data?Object(Y.jsxs)("h2",{children:["Hello ",t.data.me.name," "]}):null,Object(Y.jsx)(ve,{}),t.data?Object(Y.jsx)(pe,{events:t.data.me.events}):null,Object(Y.jsx)(ge.a,{id:"addEvent-button",children:Object(Y.jsx)(S.b,{to:"/addevent",children:"add event"})}),Object(Y.jsx)("button",{id:"logout-button",onClick:n,children:"Log Out"}),Object(Y.jsx)("button",{id:"addGroup-button",children:Object(Y.jsx)(S.b,{to:"/addGroup",children:"add group"})}),Object(Y.jsx)("button",{id:"groups-button",children:Object(Y.jsx)(S.b,{to:"/groups",children:"groups"})}),Object(Y.jsx)("button",{id:"join-group-button",children:Object(Y.jsx)(S.b,{to:"/joinGroup",children:"join group"})})]})},ye=function(){var e=Object(C.useQuery)(H),n=e.data?e.data.userGroups.map((function(e){return Object(Y.jsx)("li",{children:Object(Y.jsx)(S.b,{to:"/groups/".concat(e.id),children:e.name})},e.name)})):[];return 0===n.length&&e.data?Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h2",{children:"It seems you aren't part any group yet"}),Object(Y.jsx)("h2",{children:Object(Y.jsx)(S.b,{to:"/joinGroup",children:"Join Here"})})]}):Object(Y.jsx)("div",{children:Object(Y.jsx)("ul",{children:n})})},we=function(e){var n=e.users.map((function(e){return Object(Y.jsx)("li",{children:Object(Y.jsx)(S.b,{to:"/users/".concat(e.id),children:e.name})},e.id)}));return Object(Y.jsx)("div",{children:Object(Y.jsx)("ul",{children:n})})},Ne=function(){var e=Object(I.h)().id,n=Object(C.useQuery)(F,{variables:{id:e}});return console.log(n.data),Object(Y.jsxs)("div",{children:[n.data?n.data.group.name:null,n.data?Object(Y.jsx)(we,{users:n.data.group.users}):null]})},Se=function(){var e=Object(I.h)().id,n=Object(C.useQuery)(L,{variables:{id:e}});return n.data?Object(Y.jsx)("div",{children:n.data.user.name}):Object(Y.jsx)("div",{children:"...loading"})},Ce=function(e){var n=e.group,t=Object(C.useMutation)(M),a=Object(g.a)(t,1)[0];return Object(Y.jsx)("li",{children:Object(Y.jsxs)("span",{children:[n.name,Object(Y.jsx)("button",{onClick:function(){return a({variables:{id:n.id}})},children:"Join"})]})})},ke=function(){var e=Object(C.useQuery)(V);return Object(Y.jsxs)("div",{children:["Hello World",Object(Y.jsx)("ul",{children:e.data?e.data.allGroups.map((function(e){return Object(Y.jsx)(Ce,{group:e},e.id)})):null})]})},Ee=function(){var e=Object(x.useState)(localStorage.getItem("user-token")),n=Object(g.a)(e,2),t=n[0],a=n[1],c=G(a).logout;return Object(Y.jsx)(S.a,{children:Object(Y.jsxs)(I.d,{children:[Object(Y.jsx)(I.b,{path:"/joinGroup",children:Object(Y.jsx)(ke,{})}),Object(Y.jsx)(I.b,{path:"/users/:id",children:Object(Y.jsx)(Se,{})}),Object(Y.jsx)(I.b,{path:"/groups/:id",children:Object(Y.jsx)(Ne,{})}),Object(Y.jsx)(I.b,{path:"/groups",children:Object(Y.jsx)(ye,{})}),Object(Y.jsx)(I.b,{path:"/addGroup",children:Object(Y.jsx)(se,{})}),Object(Y.jsx)(I.b,{path:"/SignIn",children:Object(Y.jsx)(Q,{setToken:a})}),Object(Y.jsx)(I.b,{path:"/login",children:Object(Y.jsx)(B,{setToken:a})}),Object(Y.jsx)(I.b,{path:"/events/:id",children:Object(Y.jsx)(be,{})}),Object(Y.jsx)(I.b,{path:"/addevent",children:Object(Y.jsx)(re,{})}),Object(Y.jsx)(I.b,{path:"/",children:t?Object(Y.jsx)(fe,{logout:c}):Object(Y.jsx)(I.a,{to:"/login"})})]})})},$e=t(100),De=Object($e.a)((function(e,n){var t=n.headers,a=localStorage.getItem("user-token");return{headers:Object(m.a)(Object(m.a)({},t),{},{authorization:a?"bearer ".concat(a):null})}})),qe=new C.HttpLink({uri:"/graphql"}),Me=new C.ApolloClient({cache:new C.InMemoryCache,link:De.concat(qe)});p.a.render(Object(Y.jsx)(C.ApolloProvider,{client:Me,children:Object(Y.jsx)(Ee,{})}),document.getElementById("root"))},70:function(e,n,t){}},[[128,1,2]]]);
//# sourceMappingURL=main.74ab8a56.chunk.js.map