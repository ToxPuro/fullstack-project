(this["webpackJsonpdate-selector"]=this["webpackJsonpdate-selector"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a,c,s,r,l,i,o,j=n(70),d=n(0),b=n(46),u=n.n(b),h=n(17),m=n(90),O=n(126),v=n(133),x=n(127),f=n(128),p=n(129),N=n(130),g=n(131),y=n(132),S=(n(66),n(3)),w=function(e){var t=e.month,n=e.setMonth;return Object(S.jsxs)("div",{className:"header row flex-middle",children:[Object(S.jsx)("div",{className:"col col-start",children:Object(S.jsx)("div",{className:"icon",onClick:function(){n(O.a(t,1))},children:"chevron_left"})}),Object(S.jsx)("div",{className:"col col-center",children:Object(S.jsx)("span",{children:v.a(t,"MMMM YYYYY")})}),Object(S.jsx)("div",{className:"col col-end",onClick:function(){n(m.a(t,1))},children:Object(S.jsx)("div",{className:"icon",children:"chevron_right"})})]})},E=function(e){var t=e.month,n=x.a(t),a=Array.from(Array(7)).map((function(e,t){return Object(S.jsx)("div",{className:"col col-center",children:v.a(f.a(n,t),"EEEEEE")},t)}));return Object(S.jsx)("div",{className:"days row",children:a})},k=function(e){for(var t=e.month,n=p.a(t),a=N.a(n),c=x.a(n),s=g.a(a),r=[],l=[],i=c,o="";i<=s;){for(var j=0;j<7;j++){o=v.a(i,"d");var d=i;l.push(Object(S.jsx)(D,{formattedDate:o,day:d,monthStart:n})),i=f.a(i,1)}r.push(Object(S.jsx)("div",{className:"row",children:l},i)),l=[]}return Object(S.jsx)("div",{className:"body",children:r})},D=function(e){var t=e.formattedDate,n=e.day,a=e.monthStart,c=Object(d.useState)(!1),s=Object(h.a)(c,2),r=s[0],l=s[1],i=function(){l(!r)};return r?Object(S.jsxs)("div",{className:"col cell clicked",onClick:function(){return i()},children:[Object(S.jsx)("span",{className:"number",children:t}),Object(S.jsx)("span",{className:"bg",children:t})]},n):Object(S.jsxs)("div",{className:"col cell ".concat(y.a(n,a)?"":"disabled"),onClick:function(){return i()},children:[Object(S.jsx)("span",{className:"number",children:t}),Object(S.jsx)("span",{className:"bg",children:t})]},n)},C=function(){var e=Object(d.useState)(new Date),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(S.jsxs)("div",{className:"calendar",children:[Object(S.jsx)(w,{month:n,setMonth:a}),Object(S.jsx)(E,{month:n}),Object(S.jsx)(k,{month:n})]})},M=n(64),Y=n(13),q=n(31),$=Object(Y.gql)(a||(a=Object(q.a)(["\nmutation login($username: String!, $password: String!){\n  login(username: $username, password: $password){value}\n}"]))),A=Object(Y.gql)(c||(c=Object(q.a)(["\nmutation addEvent($name: String! $group: String! $dates: [String!]!){\n  addEvent(name: $name, group: $group dates: $dates){name}\n}"]))),B=(Object(Y.gql)(s||(s=Object(q.a)(["\nquery{\n  me{\n    name\n  }\n}"]))),Object(Y.gql)(r||(r=Object(q.a)(["\nquery{\n  allEvents{\n    name\n  }\n}"]))),Object(Y.gql)(l||(l=Object(q.a)(["\nquery{\n  userGroups{name}\n}"])))),I=Object(Y.gql)(i||(i=Object(q.a)(["\nquery{\n  userEvents{\n    name\n    id\n  }\n}"]))),_=Object(Y.gql)(o||(o=Object(q.a)(["\nquery event($id: ID!){\n  event(id: $id){\n    name\n    id\n    dates\n  }\n}"]))),L=n(96),Q=function(e){var t=e.month,n=e.setMonth;return Object(S.jsxs)("div",{className:"header row flex-middle",children:[Object(S.jsx)("div",{className:"col col-start",children:Object(S.jsx)("div",{className:"icon",onClick:function(){n(O.a(t,1))},children:"chevron_left"})}),Object(S.jsx)("div",{className:"col col-center",children:Object(S.jsx)("span",{children:v.a(t,"MMMM YYYYY")})}),Object(S.jsx)("div",{className:"col col-end",onClick:function(){n(m.a(t,1))},children:Object(S.jsx)("div",{className:"icon",children:"chevron_right"})})]})},F=function(e){var t=e.month,n=x.a(t),a=Array.from(Array(7)).map((function(e,t){return Object(S.jsx)("div",{className:"col col-center",children:v.a(f.a(n,t),"EEEEEE")},t)}));return Object(S.jsx)("div",{className:"days row",children:a})},G=function(e){for(var t=e.month,n=e.setDates,a=e.dates,c=p.a(t),s=N.a(c),r=x.a(c),l=g.a(s),i=[],o=[],j=r,d="";j<=l;){for(var b=0;b<7;b++){d=v.a(j,"d");var u=j;o.push(Object(S.jsx)(J,{formattedDate:d,day:u,monthStart:c,setDates:n,dates:a})),j=f.a(j,1)}i.push(Object(S.jsx)("div",{className:"row",children:o},j)),o=[]}return Object(S.jsx)("div",{className:"body",children:i})},J=function(e){var t=e.formattedDate,n=e.day,a=e.monthStart,c=e.setDates,s=e.dates,r=Object(d.useState)(!1),l=Object(h.a)(r,2),i=l[0],o=l[1],j=function(e){o(!i),c(s.concat(v.a(e,"DDD")))};return i?Object(S.jsxs)("div",{className:"col cell clicked",onClick:function(){return j(n)},children:[Object(S.jsx)("span",{className:"number",children:t}),Object(S.jsx)("span",{className:"bg",children:t})]},n):Object(S.jsxs)("div",{className:"col cell ".concat(y.a(n,a)?"":"disabled"),onClick:function(){return j(n)},children:[Object(S.jsx)("span",{className:"number",children:t}),Object(S.jsx)("span",{className:"bg",children:t})]},n)},T=function(e){var t=e.setDates,n=e.dates,a=Object(d.useState)(new Date),c=Object(h.a)(a,2),s=c[0],r=c[1];return Object(S.jsxs)("div",{className:"calendar",children:[Object(S.jsx)(Q,{month:s,setMonth:r}),Object(S.jsx)(F,{month:s}),Object(S.jsx)(G,{month:s,setDates:t,dates:n})]})},V=function(){var e=Object(d.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(d.useState)(null),s=Object(h.a)(c,2),r=s[0],l=s[1],i=Object(Y.useQuery)(B),o=[];i.data&&(o=i.data.userGroups.map((function(e){return{value:e.name,label:e.name}})));var j=Object(Y.useMutation)(A),b=Object(h.a)(j,1)[0];return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"New Event"}),Object(S.jsx)(M.a,{initialValues:{name:""},onSubmit:function(e,t){var a=e.name,c=t.resetForm;b({variables:{name:a,group:r,dates:n}}),c({})},children:function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(S.jsxs)("form",{onSubmit:c,children:["event name: ",Object(S.jsx)("input",{type:"text",name:"name",onChange:n,onBlur:a,value:t.name}),Object(S.jsx)("button",{type:"submit",children:"Submit"})]})}}),Object(S.jsx)(L.a,{options:o,onChange:function(e){l(e.value)}}),Object(S.jsx)("h2",{children:"Choose possible days"}),Object(S.jsx)(T,{dates:n,setDates:a})]})},z=function(e){var t=e.setToken,n=Object(Y.useMutation)($,{onError:function(e){console.log(e.graphQLErrors[0].message)}}),a=Object(h.a)(n,2),c=a[0],s=a[1];return Object(d.useEffect)((function(){if(s.data){var e=s.data.login.value;t(e),localStorage.setItem("user-token",e)}}),[s.data,t]),Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Login"}),Object(S.jsx)(M.a,{initialValues:{username:"",password:""},onSubmit:function(e,t){var n=e.username,a=e.password,s=t.resetForm;c({variables:{username:n,password:a}}),s({values:{username:"",password:""}})},children:function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return Object(S.jsxs)("form",{onSubmit:c,children:["username: ",Object(S.jsx)("input",{id:"username",type:"text",name:"username",onChange:n,onBlur:a,value:t.username}),Object(S.jsx)("br",{}),"password: ",Object(S.jsx)("input",{id:"password",type:"password",name:"password",onChange:n,onBlur:a,value:t.password}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{type:"submit",id:"login-button",children:"Login"})]})}})]})},H=n(43),P=function(e){var t=e.events.map((function(e){return Object(S.jsx)("li",{children:Object(S.jsx)(H.b,{to:"/events/".concat(e.id),children:e.name})},e.id)}));return Object(S.jsx)("div",{children:Object(S.jsx)("ul",{children:t})})},K=n(15),R=function(e){var t=e.month,n=e.setMonth;return Object(S.jsxs)("div",{className:"header row flex-middle",children:[Object(S.jsx)("div",{className:"col col-start",children:Object(S.jsx)("div",{className:"icon",onClick:function(){n(O.a(t,1))},children:"chevron_left"})}),Object(S.jsx)("div",{className:"col col-center",children:Object(S.jsx)("span",{children:v.a(t,"MMMM YYYYY")})}),Object(S.jsx)("div",{className:"col col-end",onClick:function(){n(m.a(t,1))},children:Object(S.jsx)("div",{className:"icon",children:"chevron_right"})})]})},U=function(e){var t=e.month,n=x.a(t),a=Array.from(Array(7)).map((function(e,t){return Object(S.jsx)("div",{className:"col col-center",children:v.a(f.a(n,t),"EEEEEE")},t)}));return Object(S.jsx)("div",{className:"days row",children:a})},W=function(e){for(var t=e.month,n=e.dates,a=p.a(t),c=N.a(a),s=x.a(a),r=g.a(c),l=[],i=[],o=s,j="";o<=r;){for(var d=0;d<7;d++){j=v.a(o,"d");var b=o;i.push(Object(S.jsx)(X,{formattedDate:j,day:b,monthStart:a,dates:n})),o=f.a(o,1)}l.push(Object(S.jsx)("div",{className:"row",children:i},o)),i=[]}return Object(S.jsx)("div",{className:"body",children:l})},X=function(e){var t=e.formattedDate,n=e.day,a=e.monthStart;return e.dates.includes(v.a(n,"DDD"))?Object(S.jsxs)("div",{className:"col cell clicked",children:[Object(S.jsx)("span",{className:"number",children:t}),Object(S.jsx)("span",{className:"bg",children:t})]},n):Object(S.jsxs)("div",{className:"col cell ".concat(y.a(n,a)?"":"disabled"),children:[Object(S.jsx)("span",{className:"number",children:t}),Object(S.jsx)("span",{className:"bg",children:t})]},n)},Z=function(e){var t=e.dates,n=Object(d.useState)(new Date),a=Object(h.a)(n,2),c=a[0],s=a[1];return Object(S.jsxs)("div",{className:"calendar",children:[Object(S.jsx)(R,{month:c,setMonth:s}),Object(S.jsx)(U,{month:c}),Object(S.jsx)(W,{month:c,dates:t}),Object(S.jsx)("ul",{children:t})]})},ee=function(){var e=Object(K.f)().id,t=Object(Y.useQuery)(_,{variables:{id:e}});return t.data?Object(S.jsxs)("div",{children:[t.data.event.name,Object(S.jsx)(Z,{dates:t.data.event.dates})]}):Object(S.jsx)("div",{children:"...loading"})},te=n(97),ne=function(){var e=Object(Y.useQuery)(I),t=Object(d.useState)(localStorage.getItem("user-token")),n=Object(h.a)(t,2),a=n[0],c=n[1],s=Object(Y.useApolloClient)();return a?Object(S.jsx)(H.a,{children:Object(S.jsxs)(K.c,{children:[Object(S.jsx)(K.a,{path:"/events/:id",children:Object(S.jsx)(ee,{})}),Object(S.jsx)(K.a,{path:"/addevent",children:Object(S.jsx)(V,{})}),Object(S.jsxs)(K.a,{path:"/",children:[Object(S.jsx)(C,{}),e.data?Object(S.jsx)(P,{events:e.data.userEvents}):null,Object(S.jsx)(te.a,{children:Object(S.jsx)(H.b,{to:"/addevent",children:"add event"})}),Object(S.jsx)("button",{onClick:function(){c(null),localStorage.clear(),s.resetStore()},children:"Log Out"})]})]})}):Object(S.jsx)(z,{setToken:c})},ae=n(98),ce=Object(ae.a)((function(e,t){var n=t.headers,a=localStorage.getItem("user-token");return{headers:Object(j.a)(Object(j.a)({},n),{},{authorization:a?"bearer ".concat(a):null})}})),se=new Y.HttpLink({uri:"/graphql"}),re=new Y.ApolloClient({cache:new Y.InMemoryCache,link:ce.concat(se)});u.a.render(Object(S.jsx)(Y.ApolloProvider,{client:re,children:Object(S.jsx)(ne,{})}),document.getElementById("root"))},66:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.a50454dc.chunk.js.map